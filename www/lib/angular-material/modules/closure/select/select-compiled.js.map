{"version":3,"sources":["select.js"],"names":[],"mappings":"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","file":"select-compiled.js","sourcesContent":["/*!\n * Angular Material Design\n * https://github.com/angular/material\n * @license MIT\n * v0.9.8\n */\ngoog.provide('ng.material.components.select');\ngoog.require('ng.material.components.backdrop');\ngoog.require('ng.material.core');\n/**\n * @ngdoc module\n * @name material.components.select\n */\n\n/***************************************************\n\n### TODO ###\n**DOCUMENTATION AND DEMOS**\n\n- [ ] ng-model with child mdOptions (basic)\n- [ ] ng-model=\"foo\" ng-model-options=\"{ trackBy: '$value.id' }\" for objects\n- [ ] mdOption with value\n- [ ] Usage with input inside\n\n### TODO - POST RC1 ###\n- [ ] Abstract placement logic in $mdSelect service to $mdMenu service\n\n***************************************************/\n\nvar SELECT_EDGE_MARGIN = 8;\nvar selectNextId = 0;\n\nangular.module('material.components.select', [\n  'material.core',\n  'material.components.backdrop'\n])\n.directive('mdSelect', SelectDirective)\n.directive('mdSelectMenu', SelectMenuDirective)\n.directive('mdOption', OptionDirective)\n.directive('mdOptgroup', OptgroupDirective)\n.provider('$mdSelect', SelectProvider);\n\n\n/**\n * @ngdoc directive\n * @name mdSelect\n * @restrict E\n * @module material.components.select\n *\n * @description Displays a select box, bound to an ng-model.\n *\n * @param {expression} ng-model The model!\n * @param {boolean=} multiple Whether it's multiple.\n * @param {string=} placeholder Placeholder hint text.\n * @param {string=} aria-label Optional label for accessibility. Only necessary if no placeholder or\n * explicit label is present.\n *\n * @usage\n * With a placeholder (label and aria-label are added dynamically)\n * <hljs lang=\"html\">\n *   <md-select\n *     ng-model=\"someModel\"\n *     placeholder=\"Select a state\">\n *     <md-option ng-value=\"opt\" ng-repeat=\"opt in neighborhoods2\">{{ opt }}</md-option>\n *   </md-select>\n * </hljs>\n *\n * With an explicit label\n * <hljs lang=\"html\">\n *   <md-select\n *     ng-model=\"someModel\">\n *     <md-select-label>Select a state</md-select-label>\n *     <md-option ng-value=\"opt\" ng-repeat=\"opt in neighborhoods2\">{{ opt }}</md-option>\n *   </md-select>\n * </hljs>\n */\nfunction SelectDirective($mdSelect, $mdUtil, $mdTheming, $mdAria, $interpolate, $compile, $parse) {\n  return {\n    restrict: 'E',\n    require: ['mdSelect', 'ngModel', '?^form'],\n    compile: compile,\n    controller: function() { } // empty placeholder controller to be initialized in link\n  };\n\n  function compile(element, attr) {\n    // The user is allowed to provide a label for the select as md-select-label child\n    var labelEl = element.find('md-select-label').remove();\n\n    // If not provided, we automatically make one\n    if (!labelEl.length) {\n      labelEl = angular.element('<md-select-label><span></span></md-select-label>');\n    } else {\n      if (!labelEl[0].firstElementChild) {\n        var spanWrapper = angular.element('<span>');\n        spanWrapper.append(labelEl.contents());\n        labelEl.append(spanWrapper);\n      }\n    }\n    labelEl.append('<span class=\"md-select-icon\" aria-hidden=\"true\"></span>');\n    labelEl.addClass('md-select-label');\n    if (!labelEl[0].hasAttribute('id')) {\n      labelEl.attr('id', 'select_label_' + $mdUtil.nextUid());\n    }\n\n    // There's got to be an md-content inside. If there's not one, let's add it.\n    if (!element.find('md-content').length) {\n      element.append( angular.element('<md-content>').append(element.contents()) );\n    }\n\n    // Add progress spinner for md-options-loading\n    if (attr.mdOnOpen) {\n      element.find('md-content').prepend(\n        angular.element('<md-progress-circular>')\n               .attr('md-mode', 'indeterminate')\n               .attr('ng-hide', '$$loadingAsyncDone')\n               .wrap('<div>')\n               .parent()\n      );\n    }\n\n    if (attr.name) {\n      var autofillClone = angular.element('<select class=\"md-visually-hidden\">');\n      autofillClone.attr({\n        'name': '.' + attr.name,\n        'ng-model': attr.ngModel,\n        'aria-hidden': 'true',\n        'tabindex': '-1'\n      });\n      var opts = element.find('md-option');\n      angular.forEach(opts, function(el) {\n        var newEl = angular.element('<option>' + el.innerHTML + '</option>');\n        if (el.hasAttribute('ng-value')) newEl.attr('ng-value', el.getAttribute('ng-value'));\n        else if (el.hasAttribute('value')) newEl.attr('value', el.getAttribute('value'));\n        autofillClone.append(newEl);\n      });\n\n      element.parent().append(autofillClone);\n    }\n\n    // Use everything that's left inside element.contents() as the contents of the menu\n    var selectTemplate = '<div class=\"md-select-menu-container\">' +\n        '<md-select-menu ' +\n        (angular.isDefined(attr.multiple) ? 'multiple' : '') + '>' +\n          element.html() +\n        '</md-select-menu></div>';\n\n    element.empty().append(labelEl);\n\n    attr.tabindex = attr.tabindex || '0';\n\n    return function postLink(scope, element, attr, ctrls) {\n      var isOpen;\n      var isDisabled;\n\n      var mdSelectCtrl = ctrls[0];\n      var ngModel = ctrls[1];\n      var formCtrl = ctrls[2];\n\n      var labelEl = element.find('md-select-label');\n      var customLabel = labelEl.text().length !== 0;\n      var selectContainer, selectScope, selectMenuCtrl;\n      createSelect();\n\n      $mdTheming(element);\n\n      if (attr.name && formCtrl) {\n        var selectEl = element.parent()[0].querySelector('select[name=\".' + attr.name + '\"]')\n        formCtrl.$removeControl(angular.element(selectEl).controller());\n      }\n\n      var originalRender = ngModel.$render;\n      ngModel.$render = function() {\n        originalRender();\n        syncLabelText();\n      };\n\n      mdSelectCtrl.setLabelText = function(text) {\n        if (customLabel) return; // Assume that user is handling it on their own\n        mdSelectCtrl.setIsPlaceholder(!text);\n        text = text || attr.placeholder || '';\n        var target = customLabel ? labelEl : labelEl.children().eq(0);\n        target.text(text);\n      };\n\n      mdSelectCtrl.setIsPlaceholder = function(val) {\n        val ? labelEl.addClass('md-placeholder') : labelEl.removeClass('md-placeholder');\n      };\n\n      scope.$$postDigest(function() {\n        setAriaLabel();\n        syncLabelText();\n      });\n\n      function setAriaLabel() {\n        var labelText = element.attr('placeholder');\n        if (!labelText) {\n          labelText = element.find('md-select-label').text();\n        }\n        $mdAria.expect(element, 'aria-label', labelText);\n      }\n\n      function syncLabelText() {\n        if (selectContainer) {\n          selectMenuCtrl = selectMenuCtrl || selectContainer.find('md-select-menu').controller('mdSelectMenu');\n          mdSelectCtrl.setLabelText(selectMenuCtrl.selectedLabels());\n        }\n      }\n\n      var deregisterWatcher;\n      attr.$observe('ngMultiple', function(val) {\n        if (deregisterWatcher) deregisterWatcher();\n        var parser = $parse(val);\n        deregisterWatcher = scope.$watch(function() { return parser(scope); }, function(multiple, prevVal) {\n          if (multiple === undefined && prevVal === undefined) return; // assume compiler did a good job\n          if (multiple) {\n            element.attr('multiple', 'multiple');\n          } else {\n            element.removeAttr('multiple');\n          }\n          if (selectContainer) {\n            selectMenuCtrl.setMultiple(multiple);\n            originalRender = ngModel.$render;\n            ngModel.$render = function() {\n              originalRender();\n              syncLabelText();\n            };\n            selectMenuCtrl.refreshViewValue();\n            ngModel.$render();\n          }\n        });\n      });\n\n      attr.$observe('disabled', function(disabled) {\n        if (typeof disabled == \"string\") {\n          disabled = true;\n        }\n        // Prevent click event being registered twice\n        if (isDisabled !== undefined && isDisabled === disabled) {\n          return;\n        }\n        isDisabled = disabled;\n        if (disabled) {\n          element.attr({'tabindex': -1, 'aria-disabled': 'true'});\n          element.off('click', openSelect);\n          element.off('keydown', handleKeypress);\n        } else {\n          element.attr({'tabindex': attr.tabindex, 'aria-disabled': 'false'});\n          element.on('click', openSelect);\n          element.on('keydown', handleKeypress);\n        }\n      });\n      if (!attr.disabled && !attr.ngDisabled) {\n        element.attr({'tabindex': attr.tabindex, 'aria-disabled': 'false'});\n        element.on('click', openSelect);\n        element.on('keydown', handleKeypress);\n      }\n\n      var ariaAttrs = {\n        role: 'combobox',\n        'aria-expanded': 'false'\n      };\n      if (!element[0].hasAttribute('id')) {\n        ariaAttrs.id = 'select_' + $mdUtil.nextUid();\n      }\n      element.attr(ariaAttrs);\n\n      scope.$on('$destroy', function() {\n        if (isOpen) {\n          $mdSelect.cancel().then(function() {\n            selectContainer.remove();\n          });\n        } else {\n          selectContainer.remove();\n        }\n      });\n\n\n      // Create a fake select to find out the label value\n      function createSelect() {\n        selectContainer = angular.element(selectTemplate);\n        var selectEl = selectContainer.find('md-select-menu');\n        selectEl.data('$ngModelController', ngModel);\n        selectEl.data('$mdSelectController', mdSelectCtrl);\n        selectScope = scope.$new();\n        selectContainer = $compile(selectContainer)(selectScope);\n        selectMenuCtrl = selectContainer.find('md-select-menu').controller('mdSelectMenu');\n      }\n\n      function handleKeypress(e) {\n        var allowedCodes = [32, 13, 38, 40];\n        if (allowedCodes.indexOf(e.keyCode) != -1 ) {\n          // prevent page scrolling on interaction\n          e.preventDefault();\n          openSelect(e);\n        } else {\n          if (e.keyCode <= 90 && e.keyCode >= 31) {\n            e.preventDefault();\n            var node = selectMenuCtrl.optNodeForKeyboardSearch(e);\n            if (!node) return;\n            var optionCtrl = angular.element(node).controller('mdOption');\n            if (!selectMenuCtrl.isMultiple) {\n              selectMenuCtrl.deselect( Object.keys(selectMenuCtrl.selected)[0] );\n            }\n            selectMenuCtrl.select(optionCtrl.hashKey, optionCtrl.value);\n            selectMenuCtrl.refreshViewValue();\n            ngModel.$render();\n          }\n        }\n      }\n\n      function openSelect() {\n        scope.$evalAsync(function() {\n          isOpen = true;\n          $mdSelect.show({\n            scope: selectScope,\n            preserveScope: true,\n            skipCompile: true,\n            element: selectContainer,\n            target: element[0],\n            hasBackdrop: true,\n            loadingAsync: attr.mdOnOpen ? scope.$eval(attr.mdOnOpen) || true : false,\n          }).then(function(selectedText) {\n            isOpen = false;\n          });\n        });\n      }\n    };\n  }\n}\nSelectDirective.$inject = [\"$mdSelect\", \"$mdUtil\", \"$mdTheming\", \"$mdAria\", \"$interpolate\", \"$compile\", \"$parse\"];\n\nfunction SelectMenuDirective($parse, $mdUtil, $mdTheming) {\n\n  SelectMenuController.$inject = [\"$scope\", \"$attrs\", \"$element\"];\n  return {\n    restrict: 'E',\n    require: ['mdSelectMenu', '?ngModel'],\n    controller: SelectMenuController,\n    link: { pre: preLink }\n  };\n\n  // We use preLink instead of postLink to ensure that the select is initialized before\n  // its child options run postLink.\n  function preLink(scope, element, attr, ctrls) {\n    var selectCtrl = ctrls[0];\n    var ngModel = ctrls[1];\n\n    $mdTheming(element);\n    element.on('click', clickListener);\n    element.on('keypress', keyListener);\n    if (ngModel) selectCtrl.init(ngModel);\n    configureAria();\n\n    function configureAria() {\n      element.attr({\n        'id': 'select_menu_' + $mdUtil.nextUid(),\n        'role': 'listbox',\n        'aria-multiselectable': (selectCtrl.isMultiple ? 'true' : 'false')\n      });\n    }\n\n    function keyListener(e) {\n      if (e.keyCode == 13 || e.keyCode == 32) {\n        clickListener(e);\n      }\n    }\n\n    function clickListener(ev) {\n      var option = $mdUtil.getClosest(ev.target, 'md-option');\n      var optionCtrl = option && angular.element(option).data('$mdOptionController');\n      if (!option || !optionCtrl) return;\n\n      var optionHashKey = selectCtrl.hashGetter(optionCtrl.value);\n      var isSelected = angular.isDefined(selectCtrl.selected[optionHashKey]);\n\n      scope.$apply(function() {\n        if (selectCtrl.isMultiple) {\n          if (isSelected) {\n            selectCtrl.deselect(optionHashKey);\n          } else {\n            selectCtrl.select(optionHashKey, optionCtrl.value);\n          }\n        } else {\n          if (!isSelected) {\n            selectCtrl.deselect( Object.keys(selectCtrl.selected)[0] );\n            selectCtrl.select( optionHashKey, optionCtrl.value );\n          }\n        }\n        selectCtrl.refreshViewValue();\n      });\n    }\n  }\n\n\n\n  function SelectMenuController($scope, $attrs, $element) {\n    var self = this;\n    self.isMultiple = angular.isDefined($attrs.multiple);\n    // selected is an object with keys matching all of the selected options' hashed values\n    self.selected = {};\n    // options is an object with keys matching every option's hash value,\n    // and values matching every option's controller.\n    self.options = {};\n\n    $scope.$watch(function() { return self.options; }, function() {\n      self.ngModel.$render();\n    }, true);\n\n    var deregisterCollectionWatch;\n    self.setMultiple = function(isMultiple) {\n      var ngModel = self.ngModel;\n      self.isMultiple = isMultiple;\n      if (deregisterCollectionWatch) deregisterCollectionWatch();\n\n      if (self.isMultiple) {\n        ngModel.$validators['md-multiple'] = validateArray;\n        ngModel.$render = renderMultiple;\n\n        // watchCollection on the model because by default ngModel only watches the model's\n        // reference. This allowed the developer to also push and pop from their array.\n        $scope.$watchCollection($attrs.ngModel, function(value) {\n          if (validateArray(value)) renderMultiple(value);\n        });\n      } else {\n        delete ngModel.$validators['md-multiple'];\n        ngModel.$render = renderSingular;\n      }\n\n      function validateArray(modelValue, viewValue) {\n        // If a value is truthy but not an array, reject it.\n        // If value is undefined/falsy, accept that it's an empty array.\n        return angular.isArray(modelValue || viewValue || []);\n      }\n    };\n\n    var searchStr = '';\n    var clearSearchTimeout, optNodes, optText;\n    var CLEAR_SEARCH_AFTER = 300;\n    self.optNodeForKeyboardSearch = function(e) {\n      clearSearchTimeout && clearTimeout(clearSearchTimeout);\n      clearSearchTimeout = setTimeout(function() {\n        clearSearchTimeout = undefined;\n        searchStr = '';\n        optText = undefined;\n        optNodes = undefined;\n      }, CLEAR_SEARCH_AFTER);\n      searchStr += String.fromCharCode(e.keyCode);\n      var search = new RegExp('^' + searchStr, 'i');\n      if (!optNodes) {\n        optNodes = $element.find('md-option');\n        optText = new Array(optNodes.length);\n        angular.forEach(optNodes, function(el, i) {\n          optText[i] = el.textContent.trim();\n        });\n      }\n      for (var i = 0; i < optText.length; ++i) {\n        if (search.test(optText[i])) {\n          return optNodes[i];\n        }\n      }\n    };\n\n\n    self.init = function(ngModel) {\n      self.ngModel = ngModel;\n\n      // Allow users to provide `ng-model=\"foo\" ng-model-options=\"{trackBy: 'foo.id'}\"` so\n      // that we can properly compare objects set on the model to the available options\n      if (ngModel.$options && ngModel.$options.trackBy) {\n        var trackByLocals = {};\n        var trackByParsed = $parse(ngModel.$options.trackBy);\n        self.hashGetter = function(value, valueScope) {\n          trackByLocals.$value = value;\n          return trackByParsed(valueScope || $scope, trackByLocals);\n        };\n      // If the user doesn't provide a trackBy, we automatically generate an id for every\n      // value passed in\n      } else {\n        self.hashGetter = function getHashValue(value) {\n          if (angular.isObject(value)) {\n            return 'object_' + (value.$$mdSelectId || (value.$$mdSelectId = ++selectNextId));\n          }\n          return value;\n        };\n      }\n      self.setMultiple(self.isMultiple);\n    };\n\n    self.selectedLabels = function() {\n      var selectedOptionEls = nodesToArray($element[0].querySelectorAll('md-option[selected]'));\n      if (selectedOptionEls.length) {\n        return selectedOptionEls.map(function(el) { return el.textContent; }).join(', ');\n      } else {\n        return '';\n      }\n    };\n\n    self.select = function(hashKey, hashedValue) {\n      var option = self.options[hashKey];\n      option && option.setSelected(true);\n      self.selected[hashKey] = hashedValue;\n    };\n    self.deselect = function(hashKey) {\n      var option = self.options[hashKey];\n      option && option.setSelected(false);\n      delete self.selected[hashKey];\n    };\n\n    self.addOption = function(hashKey, optionCtrl) {\n      if (angular.isDefined(self.options[hashKey])) {\n        throw new Error('Duplicate md-option values are not allowed in a select. ' +\n                        'Duplicate value \"' + optionCtrl.value + '\" found.');\n      }\n      self.options[hashKey] = optionCtrl;\n\n      // If this option's value was already in our ngModel, go ahead and select it.\n      if (angular.isDefined(self.selected[hashKey])) {\n        self.select(hashKey, optionCtrl.value);\n        self.refreshViewValue();\n      }\n    };\n    self.removeOption = function(hashKey) {\n      delete self.options[hashKey];\n      // Don't deselect an option when it's removed - the user's ngModel should be allowed\n      // to have values that do not match a currently available option.\n    };\n\n    self.refreshViewValue = function() {\n      var values = [];\n      var option;\n      for (var hashKey in self.selected) {\n         // If this hashKey has an associated option, push that option's value to the model.\n         if ((option = self.options[hashKey])) {\n           values.push(option.value);\n         } else {\n           // Otherwise, the given hashKey has no associated option, and we got it\n           // from an ngModel value at an earlier time. Push the unhashed value of\n           // this hashKey to the model.\n           // This allows the developer to put a value in the model that doesn't yet have\n           // an associated option.\n           values.push(self.selected[hashKey]);\n         }\n      }\n      self.ngModel.$setViewValue(self.isMultiple ? values : values[0]);\n    };\n\n    function renderMultiple() {\n      var newSelectedValues = self.ngModel.$modelValue || self.ngModel.$viewValue;\n      if (!angular.isArray(newSelectedValues)) return;\n\n      var oldSelected = Object.keys(self.selected);\n\n      var newSelectedHashes = newSelectedValues.map(self.hashGetter);\n      var deselected = oldSelected.filter(function(hash) {\n        return newSelectedHashes.indexOf(hash) === -1;\n      });\n\n      deselected.forEach(self.deselect);\n      newSelectedHashes.forEach(function(hashKey, i) {\n        self.select(hashKey, newSelectedValues[i]);\n      });\n    }\n    function renderSingular() {\n      var value = self.ngModel.$viewValue || self.ngModel.$modelValue;\n      Object.keys(self.selected).forEach(self.deselect);\n      self.select( self.hashGetter(value), value );\n    }\n  }\n\n}\nSelectMenuDirective.$inject = [\"$parse\", \"$mdUtil\", \"$mdTheming\"];\n\nfunction OptionDirective($mdButtonInkRipple, $mdUtil) {\n\n  OptionController.$inject = [\"$element\"];\n  return {\n    restrict: 'E',\n    require: ['mdOption', '^^mdSelectMenu'],\n    controller: OptionController,\n    compile: compile\n  };\n\n  function compile(element, attr) {\n    // Manual transclusion to avoid the extra inner <span> that ng-transclude generates\n    element.append( angular.element('<div class=\"md-text\">').append(element.contents()) );\n\n    element.attr('tabindex', attr.tabindex || '0');\n    return postLink;\n  }\n\n  function postLink(scope, element, attr, ctrls) {\n    var optionCtrl = ctrls[0];\n    var selectCtrl = ctrls[1];\n\n    if (angular.isDefined(attr.ngValue)) {\n      scope.$watch(attr.ngValue, setOptionValue);\n    } else if (angular.isDefined(attr.value)) {\n      setOptionValue(attr.value);\n    } else {\n      scope.$watch(function() { return element.text(); }, setOptionValue);\n    }\n\n    scope.$$postDigest(function() {\n      attr.$observe('selected', function(selected) {\n        if (!angular.isDefined(selected)) return;\n        if (selected) {\n          if (!selectCtrl.isMultiple) {\n            selectCtrl.deselect( Object.keys(selectCtrl.selected)[0] );\n          }\n          selectCtrl.select(optionCtrl.hashKey, optionCtrl.value);\n        } else {\n          selectCtrl.deselect(optionCtrl.hashKey);\n        }\n        selectCtrl.refreshViewValue();\n        selectCtrl.ngModel.$render();\n      });\n    });\n\n    $mdButtonInkRipple.attach(scope, element);\n    configureAria();\n\n    function setOptionValue(newValue, oldValue) {\n      var oldHashKey = selectCtrl.hashGetter(oldValue, scope);\n      var newHashKey = selectCtrl.hashGetter(newValue, scope);\n\n      optionCtrl.hashKey = newHashKey;\n      optionCtrl.value = newValue;\n\n      selectCtrl.removeOption(oldHashKey, optionCtrl);\n      selectCtrl.addOption(newHashKey, optionCtrl);\n    }\n\n    scope.$on('$destroy', function() {\n      selectCtrl.removeOption(optionCtrl.hashKey, optionCtrl);\n    });\n\n    function configureAria() {\n      var ariaAttrs = {\n        'role': 'option',\n        'aria-selected': 'false'\n      };\n\n      if (!element[0].hasAttribute('id')) {\n        ariaAttrs.id = 'select_option_' + $mdUtil.nextUid();\n      }\n      element.attr(ariaAttrs);\n    }\n  }\n\n  function OptionController($element) {\n    this.selected = false;\n    this.setSelected = function(isSelected) {\n      if (isSelected && !this.selected) {\n        $element.attr({\n          'selected': 'selected',\n          'aria-selected': 'true'\n        });\n      } else if (!isSelected && this.selected) {\n        $element.removeAttr('selected');\n        $element.attr('aria-selected', 'false');\n      }\n      this.selected = isSelected;\n    };\n  }\n\n}\nOptionDirective.$inject = [\"$mdButtonInkRipple\", \"$mdUtil\"];\n\nfunction OptgroupDirective() {\n  return {\n    restrict: 'E',\n    compile: compile\n  };\n  function compile(el, attrs) {\n    var labelElement = el.find('label');\n    if (!labelElement.length) {\n      labelElement = angular.element('<label>');\n      el.prepend(labelElement);\n    }\n    if (attrs.label) labelElement.text(attrs.label);\n  }\n}\n\nfunction SelectProvider($$interimElementProvider) {\n  selectDefaultOptions.$inject = [\"$mdSelect\", \"$mdConstant\", \"$$rAF\", \"$mdUtil\", \"$mdTheming\", \"$timeout\", \"$window\"];\n  return $$interimElementProvider('$mdSelect')\n    .setDefaults({\n      methods: ['target'],\n      options: selectDefaultOptions\n    });\n\n  /* ngInject */\n  function selectDefaultOptions($mdSelect, $mdConstant, $$rAF, $mdUtil, $mdTheming, $timeout, $window ) {\n    return {\n      parent: 'body',\n      onShow: onShow,\n      onRemove: onRemove,\n      hasBackdrop: true,\n      disableParentScroll: true,\n      themable: true\n    };\n\n    function onShow(scope, element, opts) {\n      if (!opts.target) {\n        throw new Error('$mdSelect.show() expected a target element in options.target but got ' +\n                        '\"' + opts.target + '\"!');\n      }\n\n      angular.extend(opts, {\n        isRemoved: false,\n        target: angular.element(opts.target), //make sure it's not a naked dom node\n        parent: angular.element(opts.parent),\n        selectEl: element.find('md-select-menu'),\n        contentEl: element.find('md-content'),\n        backdrop: opts.hasBackdrop && angular.element('<md-backdrop class=\"md-select-backdrop md-click-catcher\">')\n      });\n\n      opts.resizeFn = function() {\n        $$rAF(function() {\n          $$rAF(function() {\n            animateSelect(scope, element, opts);\n          });\n        });\n      };\n\n      angular.element($window).on('resize', opts.resizeFn);\n      angular.element($window).on('orientationchange', opts.resizeFn);\n\n\n      configureAria();\n\n      element.removeClass('md-leave');\n\n      var optionNodes = opts.selectEl[0].getElementsByTagName('md-option');\n\n      if (opts.loadingAsync && opts.loadingAsync.then) {\n        opts.loadingAsync.then(function() {\n          scope.$$loadingAsyncDone = true;\n          // Give ourselves two frames for the progress loader to clear out.\n          $$rAF(function() {\n            $$rAF(function() {\n              // Don't go forward if the select has been removed in this time...\n              if (opts.isRemoved) return;\n              animateSelect(scope, element, opts);\n            });\n          });\n        });\n      } else if (opts.loadingAsync) {\n        scope.$$loadingAsyncDone = true;\n      }\n\n      if (opts.disableParentScroll && !$mdUtil.getClosest(opts.target, 'MD-DIALOG')) {\n        opts.restoreScroll = $mdUtil.disableScrollAround(opts.target);\n      } else {\n        opts.disableParentScroll = false;\n      }\n      // Only activate click listeners after a short time to stop accidental double taps/clicks\n      // from clicking the wrong item\n      $timeout(activateInteraction, 75, false);\n\n      if (opts.backdrop) {\n        $mdTheming.inherit(opts.backdrop, opts.parent);\n        opts.parent.append(opts.backdrop);\n      }\n      opts.parent.append(element);\n\n      // Give the select a frame to 'initialize' in the DOM,\n      // so we can read its height/width/position\n      $$rAF(function() {\n        $$rAF(function() {\n          if (opts.isRemoved) return;\n          animateSelect(scope, element, opts);\n        });\n      });\n\n      return $mdUtil.transitionEndPromise(opts.selectEl, {timeout: 350});\n\n      function configureAria() {\n        opts.target.attr('aria-expanded', 'true');\n      }\n\n      function activateInteraction() {\n        if (opts.isRemoved) return;\n        var selectCtrl = opts.selectEl.controller('mdSelectMenu') || {};\n        element.addClass('md-clickable');\n\n        opts.backdrop && opts.backdrop.on('click', function(e) {\n          e.preventDefault();\n          e.stopPropagation();\n          opts.restoreFocus = false;\n          scope.$apply($mdSelect.cancel);\n        });\n\n        // Escape to close\n        opts.selectEl.on('keydown', function(ev) {\n          switch (ev.keyCode) {\n            case $mdConstant.KEY_CODE.SPACE:\n            case $mdConstant.KEY_CODE.ENTER:\n              var option = $mdUtil.getClosest(ev.target, 'md-option');\n              if (option) {\n                opts.selectEl.triggerHandler({\n                  type: 'click',\n                  target: option\n                });\n                ev.preventDefault();\n              }\n              break;\n            case $mdConstant.KEY_CODE.TAB:\n            case $mdConstant.KEY_CODE.ESCAPE:\n              ev.preventDefault();\n              opts.restoreFocus = true;\n              scope.$apply($mdSelect.cancel);\n          }\n        });\n\n        // Cycling of options, and closing on enter\n        opts.selectEl.on('keydown', function(ev) {\n          switch (ev.keyCode) {\n            case $mdConstant.KEY_CODE.UP_ARROW: return focusPrevOption();\n            case $mdConstant.KEY_CODE.DOWN_ARROW: return focusNextOption();\n            default:\n              if (ev.keyCode >= 31 && ev.keyCode <= 90) {\n                var optNode = opts.selectEl.controller('mdSelectMenu').optNodeForKeyboardSearch(ev);\n                optNode && optNode.focus();\n              }\n          }\n        });\n\n\n        function focusOption(direction) {\n          var optionsArray = nodesToArray(optionNodes);\n          var index = optionsArray.indexOf(opts.focusedNode);\n          if (index === -1) {\n            // We lost the previously focused element, reset to first option\n            index = 0;\n          } else if (direction === 'next' && index < optionsArray.length - 1) {\n            index++;\n          } else if (direction === 'prev' && index > 0) {\n            index--;\n          }\n          var newOption = opts.focusedNode = optionsArray[index];\n          newOption && newOption.focus();\n        }\n        function focusNextOption() {\n          focusOption('next');\n        }\n        function focusPrevOption() {\n          focusOption('prev');\n        }\n\n        opts.selectEl.on('click', checkCloseMenu);\n        opts.selectEl.on('keydown', function(e) {\n          if (e.keyCode == 32 || e.keyCode == 13) {\n            checkCloseMenu();\n          }\n        });\n\n        function checkCloseMenu() {\n          if (!selectCtrl.isMultiple) {\n            opts.restoreFocus = true;\n            scope.$evalAsync(function() {\n              $mdSelect.hide(selectCtrl.ngModel.$viewValue);\n            });\n          }\n        }\n      }\n\n    }\n\n    function onRemove(scope, element, opts) {\n      opts.isRemoved = true;\n      element.addClass('md-leave')\n        .removeClass('md-clickable');\n      opts.target.attr('aria-expanded', 'false');\n\n\n      angular.element($window).off('resize', opts.resizeFn);\n      angular.element($window).off('orientationchange', opts.resizefn);\n      opts.resizeFn = undefined;\n\n      var mdSelect = opts.selectEl.controller('mdSelect');\n      if (mdSelect) {\n        mdSelect.setLabelText(opts.selectEl.controller('mdSelectMenu').selectedLabels());\n      }\n\n      return $mdUtil.transitionEndPromise(element, { timeout: 350 }).then(function() {\n        element.removeClass('md-active');\n        opts.backdrop && opts.backdrop.remove();\n        if (element[0].parentNode === opts.parent[0]) {\n          opts.parent[0].removeChild(element[0]); // use browser to avoid $destroy event\n        }\n        if (opts.disableParentScroll) {\n          opts.restoreScroll();\n        }\n        if (opts.restoreFocus) opts.target.focus();\n      });\n    }\n\n    function animateSelect(scope, element, opts) {\n      var containerNode = element[0],\n          targetNode = opts.target[0].firstElementChild.firstElementChild, // target the first span, functioning as the label\n          parentNode = opts.parent[0],\n          selectNode = opts.selectEl[0],\n          contentNode = opts.contentEl[0],\n          parentRect = parentNode.getBoundingClientRect(),\n          targetRect = targetNode.getBoundingClientRect(),\n          shouldOpenAroundTarget = false,\n          bounds = {\n            left: parentRect.left + SELECT_EDGE_MARGIN,\n            top: SELECT_EDGE_MARGIN,\n            bottom: parentRect.height - SELECT_EDGE_MARGIN,\n            right: parentRect.width - SELECT_EDGE_MARGIN - ($mdUtil.floatingScrollbars() ? 16 : 0)\n          },\n          spaceAvailable = {\n            top: targetRect.top - bounds.top,\n            left: targetRect.left - bounds.left,\n            right: bounds.right - (targetRect.left + targetRect.width),\n            bottom: bounds.bottom - (targetRect.top + targetRect.height)\n          },\n          maxWidth = parentRect.width - SELECT_EDGE_MARGIN * 2,\n          isScrollable = contentNode.scrollHeight > contentNode.offsetHeight,\n          selectedNode = selectNode.querySelector('md-option[selected]'),\n          optionNodes = selectNode.getElementsByTagName('md-option'),\n          optgroupNodes = selectNode.getElementsByTagName('md-optgroup');\n\n\n      var centeredNode;\n      // If a selected node, center around that\n      if (selectedNode) {\n        centeredNode = selectedNode;\n      // If there are option groups, center around the first option group\n      } else if (optgroupNodes.length) {\n        centeredNode = optgroupNodes[0];\n      // Otherwise, center around the first optionNode\n      } else if (optionNodes.length){\n        centeredNode = optionNodes[0];\n      // In case there are no options, center on whatever's in there... (eg progress indicator)\n      } else {\n        centeredNode = contentNode.firstElementChild || contentNode;\n      }\n\n      if (contentNode.offsetWidth > maxWidth) {\n        contentNode.style['max-width'] = maxWidth + 'px';\n      }\n      if (shouldOpenAroundTarget) {\n        contentNode.style['min-width'] = targetRect.width + 'px';\n      }\n\n      // Remove padding before we compute the position of the menu\n      if (isScrollable) {\n        selectNode.classList.add('md-overflow');\n      }\n\n      // Get the selectMenuRect *after* max-width is possibly set above\n      var selectMenuRect = selectNode.getBoundingClientRect();\n      var centeredRect = getOffsetRect(centeredNode);\n\n      if (centeredNode) {\n        var centeredStyle = $window.getComputedStyle(centeredNode);\n        centeredRect.paddingLeft = parseInt(centeredStyle.paddingLeft, 10) || 0;\n        centeredRect.paddingRight = parseInt(centeredStyle.paddingRight, 10) || 0;\n      }\n\n      var focusedNode = centeredNode;\n      if ((focusedNode.tagName || '').toUpperCase() === 'MD-OPTGROUP') {\n        focusedNode = optionNodes[0] || contentNode.firstElementChild || contentNode;\n      }\n\n      if (isScrollable) {\n        var scrollBuffer = contentNode.offsetHeight / 2;\n        contentNode.scrollTop = centeredRect.top + centeredRect.height / 2 - scrollBuffer;\n\n        if (spaceAvailable.top < scrollBuffer) {\n          contentNode.scrollTop = Math.min(\n            centeredRect.top,\n            contentNode.scrollTop + scrollBuffer - spaceAvailable.top\n          );\n        } else if (spaceAvailable.bottom < scrollBuffer) {\n          contentNode.scrollTop = Math.max(\n            centeredRect.top + centeredRect.height - selectMenuRect.height,\n            contentNode.scrollTop - scrollBuffer + spaceAvailable.bottom\n          );\n        }\n      }\n\n      var left, top, transformOrigin;\n      if (shouldOpenAroundTarget) {\n        left = targetRect.left;\n        top = targetRect.top + targetRect.height;\n        transformOrigin = '50% 0';\n        if (top + selectMenuRect.height > bounds.bottom) {\n          top = targetRect.top - selectMenuRect.height;\n          transformOrigin = '50% 100%';\n        }\n      } else {\n        left = targetRect.left + centeredRect.left - centeredRect.paddingLeft;\n        top = Math.floor(targetRect.top + targetRect.height / 2 - centeredRect.height / 2 -\n          centeredRect.top + contentNode.scrollTop);\n\n\n        transformOrigin = (centeredRect.left + targetRect.width / 2) + 'px ' +\n        (centeredRect.top + centeredRect.height / 2 - contentNode.scrollTop) + 'px 0px';\n\n        containerNode.style.minWidth = targetRect.width + centeredRect.paddingLeft +\n          centeredRect.paddingRight + 'px';\n      }\n\n      // Keep left and top within the window\n      var containerRect = containerNode.getBoundingClientRect();\n      containerNode.style.left = clamp(bounds.left, left, bounds.right - containerRect.width) + 'px';\n      containerNode.style.top = clamp(bounds.top, top, bounds.bottom - containerRect.height) + 'px';\n      selectNode.style[$mdConstant.CSS.TRANSFORM_ORIGIN] = transformOrigin;\n\n      selectNode.style[$mdConstant.CSS.TRANSFORM] = 'scale(' +\n        Math.min(targetRect.width / selectMenuRect.width, 1.0) + ',' +\n        Math.min(targetRect.height / selectMenuRect.height, 1.0) +\n      ')';\n\n\n      $$rAF(function() {\n        element.addClass('md-active');\n        selectNode.style[$mdConstant.CSS.TRANSFORM] = '';\n        if (focusedNode) {\n          opts.focusedNode = focusedNode;\n          focusedNode.focus();\n        }\n      });\n    }\n\n  }\n\n  function clamp(min, n, max) {\n    return Math.max(min, Math.min(n, max));\n  }\n\n  function getOffsetRect(node) {\n    return node ? {\n      left: node.offsetLeft,\n      top: node.offsetTop,\n      width: node.offsetWidth,\n      height: node.offsetHeight\n    } : { left: 0, top: 0, width: 0, height: 0 };\n  }\n}\nSelectProvider.$inject = [\"$$interimElementProvider\"];\n\n// Annoying method to copy nodes to an array, thanks to IE\nfunction nodesToArray(nodes) {\n  var results = [];\n  for (var i = 0; i < nodes.length; ++i) {\n    results.push(nodes.item(i));\n  }\n  return results;\n}\n\nng.material.components.select = angular.module(\"material.components.select\");"]}