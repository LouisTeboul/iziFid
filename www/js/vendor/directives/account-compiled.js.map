{"version":3,"sources":["account.js"],"names":[],"mappings":"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","file":"account-compiled.js","sourcesContent":["\"use strict\";\n\nangular.module('APIServiceApp')\n    .directive('iziAccount', function () {\n        return {\n            restrict: \"EA\",\n            replace: true,\n            transclude: true,\n            scope: {\n                barcode: \"@\",\n                clientUrl: \"@\",\n                theme: \"@\",\n                remoteCss: \"@\",\n                otherModelValue: \"=compareTo\",\n                firebase: \"@\",\n                auto: \"=\"\n            },\n\n            templateUrl: 'js/vendor/directives/views/account.html',\n            link: function (scope) {\n                if (scope.theme === 'light') {\n                    angular.element('.izi-account').addClass('izi-light-theme');\n                }\n            },\n            controller: [\n                '$scope', '$rootScope', '$element', '$attrs', '$http', '$window', '$timeout', '$log', '$mdDialog', '$mdToast', '$animate', '$firebaseObject', '$firebaseArray', 'APIService',\n                function ($scope, $rootScope, $element, $attrs, $http, $window, $timeout, $log, $mdDialog, $mdToast, $animate, $firebaseObject, $firebaseArray, APIService) {\n\n                    $scope.isReady = false;\n                    $rootScope.isReady = false;\n\n                    document.addEventListener(\"deviceready\", onDeviceReady, false);\n\n                    /** Initial setup */\n                    $timeout(function () {\n                        if (!window.phonegap) {\n                            !APIService.get.debugState() ?\n                                $window.alert('The app is running in a browser, no UUID found!') :\n                                $log.info('The app is running in a browser, no UUID found!');\n                            $scope.isBrowser = true;\n                        }\n                    }, 0);\n\n                    /**\n                     * @function generateUUID\n                     * Permet de générer un UUID aléatoire pour la version navigateur de l'appli (l'uuid est fourni par phonegap si l'app tourne sur un device).\n                     * @returns {string} l'UUID qui sera enregistré dans le BO et dans le localStorage pour qu'il reste le même.\n                     */\n                    function generateUUID() {\n                        var d = new Date().getTime();\n                        var uuid = 'xxxxxxxx-xxxx-4xxx-yxxx-xxxx'.replace(/[xy]/g, function (c) {\n                            var r = (d + Math.random() * 16) % 16 | 0;\n                            d = Math.floor(d / 16);\n                            return (c == 'x' ? r : (r & 0x3 | 0x8)).toString(16);\n                        });\n                        return uuid + \"-browser\";\n                    }\n\n                    /** Si l'app tourne dans un navigateur, on récupère l'UUID stocké dans le localStorage ou on en génère un si c'est la 1ere visite du client */\n                    if (!window.device) {\n                        var storedUUID = localStorage.getItem('deviceUUID');\n                        if (!storedUUID) {\n                            $scope.randomUUID = generateUUID();\n                            localStorage.setItem('deviceUUID', $scope.randomUUID);\n                            storedUUID = $scope.randomUUID;\n                        }\n                        window.device = {uuid: storedUUID};\n                        window.phonegap = true;\n                        onDeviceReady();\n                    }\n\n                    /**\n                     * @function blackOrWhite\n                     * Cette fonction retourne blanc ou noir en fonction de la couleur passée en paramètre pour la meilleure visibilité.\n                     * Si la couleur passée est trop sombre pour que du noir (#333) soit visible dessus, la fonction retournera blanc (#fefefe), et inversement.\n                     * @param hexcolor la couleur à comparer (en général la couleur du fond)\n                     * @returns {string} soit '#333' soit '#fefefe'\n                     */\n                    function blackOrWhite(hexcolor) {\n                        var color = hexcolor.substring(1);\n                        hexcolor = color.length < 5 ? color + color : color;\n                        var r = parseInt(hexcolor.substr(0, 2), 16);\n                        var g = parseInt(hexcolor.substr(2, 2), 16);\n                        var b = parseInt(hexcolor.substr(4, 2), 16);\n                        var yiq = ((r * 299) + (g * 587) + (b * 114)) / 1000;\n                        return (yiq >= 125) ? '#333' : '#fefefe';\n                    }\n\n                    /**\n                     * @function onDeviceReady\n                     * Fonction appellée par défaut par phonegap une fois qu'il est prêt. Si l'appli tourne dans un navigateur, cette fonction est quand même appellée et window.device est défini (voir l.48)\n                     */\n                    function onDeviceReady() {\n                        if (window.device) {\n                            $scope.isBrowser = false;\n                            /** Si aucune url client n'est fournie (par paramètre sur la directive, param url ou autre), on utilise une url par défaut pour pouvoir appeller GetServerUrl\n                             *  Sinon, on applique l'url déjà présente. */\n                            if (!$scope.clientUrl) APIService.set.clientUrl('http://ffpizza.izipass.pro');\n                            else APIService.set.clientUrl($scope.clientUrl);\n\n                            /** On apelle GetServerUrl en passant en paramètre l'UUID du device ou navigateur actuel */\n                            $http.get(APIService.get.callableUrl(\"GetServerUrl?Hardware_Id=\" + window.device.uuid)).success(function (data) {\n                                $scope.deviceName = data.AppName;\n                                $rootScope.deviceName = data.AppName;\n\n                                /** Si aucune url n'est retournée par l'API, ce device n'est pas relié à la fidélité dans le BO */\n                                if (!data.Server_Url) alert(\"Cet appareil n'est pas relié à la fidélité !\\n\\nUUID: \" + window.device.uuid);\n                                /** Sinon, on applique cette url, et on récupère la config firebase pour essayer de trouver l'appli qui correspond à l'url renvoyée par l'api */\n                                APIService.set.clientUrl(data.Server_Url);\n                                $scope.clientUrl = data.Server_Url;\n                                var confTableRef = new Firebase(\"https://izigenerator.firebaseio.com/config\");\n                                var confTable = $firebaseArray(confTableRef);\n\n                                confTable.$loaded().then(function (data) {\n                                    $scope.configuration = data;\n\n                                    /** On itère sur les configs, si une des configs contient notre url on l'ajoute aux résultats*/\n                                    var result = $.grep(data, function (e) {\n                                        return e.url ? e.url.indexOf($scope.clientUrl.replace('www.', '')) > -1 : 0;\n                                    });\n\n                                    /** TODO: prévoir le cas où plusieurs configs existent avec la même url\n                                     * Pour l'instant, on prends le 1er resultat et on utilise son url de firebase pour récupérer les données de personalisation */\n                                    if (result[0]) {\n                                        $scope.firebase = result[result.length - 1].firebase;\n                                        var ref = new Firebase($scope.firebase); //jshint ignore:line\n\n                                        $scope.data = $firebaseObject(ref);\n\n                                        $scope.data.$loaded()\n                                            .then(function (data) {\n                                                /** On a notre data, on cache le loader, on affiche la vue et on fait la customization */\n                                                $scope.isReady = true;\n                                                $rootScope.isReady = true;\n\n                                                document.title = data.title;\n                                                var topHeader = $('.bar-header h1');\n                                                topHeader.text(data.title.replace('Fidélité', ''));\n\n                                                topHeader.attr('style', 'font-family: \"' + stripNameOffGoogleFonts(data.styling.mainFont) + '\", Abel, Arial, sans-serif !important; text-align: center; margin-bottom: 2px; margin-left: -60px; font-weight: 400; font-size: 2em;');\n                                                $('.bar-header').css('background-color', data.styling.primaryColor);\n                                                $('.button-fab-top-right').css('background-color', data.styling.mainColor).css('border-color', data.styling.mainColor);\n                                                var body = $('body');\n                                                var bgColor = body.css('background-color');\n                                                if (bgColor === \"rgb(255, 255, 255)\") {\n                                                    bgColor = \"#ffffff\";\n                                                }\n                                                var properColor = blackOrWhite(bgColor);\n                                                body.css('color', properColor + ' !important');\n\n                                                $scope.customization = data;\n                                                /** Get the customization data from firebase and build css style from it */\n                                                angular.element(document).find('head').append(\"<style type='text/css'>\" +\n                                                    buildStyleFromData($scope.customization) +\n                                                    angular.element('#izi-style').html().replace(/#123456/g, $scope.customization.styling.mainColor).replace(/#654321/g, $scope.customization.styling.secondaryColor).replace(/#321654/g, $scope.customization.styling.bgColor ? $scope.customization.styling.bgColor : 'transparent') + \"</style>\");\n                                                angular.element('#izi-style').remove();\n\n                                            })\n                                            .catch(function (error) {\n                                                console.error(\"Error:\", error);\n                                            }\n                                        );\n                                    }\n                                });\n\n\n                            }).error(function (e) {\n                                $scope.debug ? $log.error(e) : 0;\n                            });\n\n                        }\n                    }\n\n                    /**\n                     * @function stripNameOffGoogleFonts\n                     * Récupère juste le nom d'une police à partir d'une url Google Fonts\n                     * @param gfontsUrl l'url Google Fonts\n                     * @returns {string} le nom de la police\n                     */\n                    function stripNameOffGoogleFonts(gfontsUrl) {\n                        return gfontsUrl.replace(\"http://fonts.googleapis.com/css?family=\", \"\").replace(/:.+/, \"\").replace(\"+\", \" \");\n                    }\n\n                    /**\n                     * @function buildStyleFromData\n                     * Génère tout le css nécéssaire à la personalisation des vues en fonction du data retourné par firebase\n                     * @param data l'objet contenant les données de personalisation, retourné par firebase plus haut.\n                     * @returns {string} le CSS à appliquer\n                     */\n                    function buildStyleFromData(data) {\n                        var mainFontName = stripNameOffGoogleFonts(data.styling.mainFont);\n                        var secondaryFontName = stripNameOffGoogleFonts(data.styling.secondaryFont);\n                        var fidItemStyle = \"\";\n                        if (data.styling.bgColor) {\n                            $('html, body, ion-view').css('background', data.styling.bgColor);\n                            $('.izi-account input').css('background-color', data.styling.bgColor + ' !important');\n\n                            if (data.styling.bgColor !== \"transparent\" && data.styling.bgColor !== \"#ffffff\" && data.styling.bgColor !== \"#fff\") {\n                                fidItemStyle = \".izi-account .fid-item-title,\" +\n                                    \".izi-account .fid-item-title + div b,\" +\n                                    \".izi-account .fid-item-title + input { color: \" + data.styling.bgColor + \" !important; }\" +\n                                    \".izi-account .alert p, .izi-account .barcode-container small, .izi-account .card h4 { color: \" + blackOrWhite(blackOrWhite(data.styling.bgColor)) + \" !important;  font-family: \" + secondaryFontName + \", Helvetica, Arial, sans-serif !important; }\"\n                            }\n                        }\n\n                        return \"@import url(\" + data.styling.mainFont + \");\" +\n                            \"@import url(\" + data.styling.secondaryFont + \");\" +\n                            \".izi-account h1, .izi-account h2, .izi-account h3:not(.fid-item-title) { color: \" + data.styling.mainColor + \" !important; font-family:\" + mainFontName + \", Helvetica, Arial, sans-serif !important; }\" +\n                            \".izi-account h4, .izi-account h5, .izi-account p, .izi-account a, .izi-account small, .izi-account p, .izi-account input, .izi-account label { color: \" + data.styling.secondaryColor + \" !important; font-family: \" + secondaryFontName + \", Helvetica, Arial, sans-serif !important; }\" +\n                            \".izi-account .fid-item-title { font-family:\" + mainFontName + \", Helvetica, Arial, sans-serif !important; }\" +\n                            \".izi-account .fid-item-title + div b, .izi-account .fid-item-title + input { font-family:\" + secondaryFontName + \", Helvetica, Arial, sans-serif !important; }\" +\n                            \".izi-account a, .izi-account a:hover { color: \" + data.styling.mainColor + \" !important; } \" +\n                            \".izi-account button { color: \" + blackOrWhite(data.styling.bgColor) + \" !important;  font-family: \" + secondaryFontName + \", Helvetica, Arial, sans-serif !important; }\" +\n                            fidItemStyle;\n                    }\n\n                    $scope.toastPosition = {\n                        bottom: true,\n                        top: false,\n                        left: false,\n                        right: true\n                    };\n\n                    /**\n                     * @function $scope.getToastPosition Utility function for material toast\n                     * @returns {string} The toast position\n                     */\n                    $scope.getToastPosition = function () {\n                        return Object.keys($scope.toastPosition)\n                            .filter(function (pos) {\n                                return $scope.toastPosition[pos];\n                            })\n                            .join(' ');\n                    };\n\n                    /**\n                     * @function toast Displays a toast with a message\n                     * @param {string} message The message to display in the toast\n                     */\n                    $scope.toast = function (message) {\n                        $mdToast.show(\n                            $mdToast.simple()\n                                .content(message)\n                                .position($scope.getToastPosition())\n                                .hideDelay(1500)\n                        );\n                    };\n\n                    $scope.form = {};\n                    $scope.QRCodeValid = true;\n                    $scope.client = {};\n                    var balanceInUse;\n\n                    $attrs.$observe('barcode', function (passedBarcode) {\n                        checkBarcode(passedBarcode);\n                        $scope.barcodeValid ? displayData() : 0;\n                    });\n\n                    $scope.customStyle ? angular.element(document).find('head').prepend(\"<style type='text/css'>\" + $scope.customStyle + \"</style>\") : 0;\n\n                    /**\n                     * @function checkBarcode\n                     * Si le barcode semble valide, on l'affecte à $scope.barcode, sinon on supprime $scope.barcode\n                     * @param barcode\n                     */\n                    function checkBarcode(barcode) {\n                        ($scope.barcodeValid = !!(barcode && APIService.validate.barcode(barcode))) ? $scope.barcode = barcode : delete $scope.barcode;\n                    }\n\n                    /**\n                     * @function displayData\n                     * Fonction permettant d'identifier un client ou un QR de type offre\n                     */\n                    function displayData() {\n                        $scope.isReady = false;\n                        APIService.get.loyaltyObject($scope.barcode, function (data) {\n                            $log.info('loyalty object:', data);\n                            $scope.isReady = true;\n                            // Si l'API retourne false, la carte est inconnue\n                            if (data === false) {\n                                $scope.reset();\n                                navigator.notification.alert('Carte inconnue !', null, document.title, \"OK\");\n//                                $window.alert('Carte inconnue !');\n                                !$scope.isBrowser ? $rootScope.scan() : 0;\n\n                                // Si l'API ne retourne pas de Barcode, ce QR est une offre\n                            } else if (data.Barcodes && data.Barcodes.length === 0 && data.LoyaltyObjectId === 0) {\n                                if (data.Offers !== []) {\n                                    $scope.showVoucherView = true;\n                                    $scope.voucher = data.Offers[0];\n                                }\n\n                                // Si l'API ne retourne pas de prénom, nom et email, le client n'est pas enregistré\n                            } else if (!data.CustomerFirstName && !data.CustomerLastName && !data.CustomerEmail) {\n                                $scope.client.barcode = $scope.barcode;\n\n                                // Si cette url accepte le login anonyme, on identifie le client en tant que client anonyme\n                                if (data.AllowAnonymous) {\n                                    if (data.AnonymousCustomer) {\n                                        $scope.data = data;\n                                        $scope.data.Offers = APIService.get.formattedOffers(data);\n                                        $scope.selectedAction = data.CustomActions ? data.CustomActions[0].Id : null;\n                                        $scope.hideData = false;\n                                    } else {\n                                        APIService.actions.registerAnonymous({Barcode: $scope.client.barcode}).then(function (data) {\n                                            $scope.data = data.data;\n                                            $scope.data.Offers = APIService.get.formattedOffers(data);\n                                            $scope.selectedAction = data.CustomActions ? data.CustomActions[0].Id : null;\n                                            $scope.hideData = false;\n                                        }).catch(function (error) {\n                                            $log.error('registerAnonymous error', error);\n                                        });\n                                    }\n\n                                    // Sinon, on envoie le client vers le formulaire d'enregistrement\n                                } else {\n                                    $scope.reset();\n                                    $scope.goRegister();\n                                }\n\n                                // Sinon, le client a bien été identifié, on affiche la vue\n                            } else {\n                                $scope.data = data;\n                                $scope.data.Offers = APIService.get.formattedOffers(data);\n                                $scope.selectedAction = data.CustomActions ? data.CustomActions[0].Id : null;\n                                $scope.hideData = false;\n                            }\n                        });\n                    }\n\n                    $scope.getDate = function (date) {\n                        return new Date(date);\n                    };\n\n                    /**\n                     * @function disconnect\n                     * Fait confirmer à l'user qu'il veut se déconnecter\n                     */\n                    $scope.disconnect = function () {\n                        if (navigator.notification) {\n                            navigator.notification.confirm('Êtes-vous sûr de vouloir vous déconnecter ?', function () {\n                                $scope.reset();\n                            }, document.title);\n                        } else {\n                            $window.confirm(\"Êtes-vous sûr de vouloir vous déconnecter ?\") ? (function () {\n                                $scope.reset();\n                            })() : 0;\n                        }\n                    };\n\n                    /**\n                     * @function goRegister\n                     * Affiche la vue du formulaire d'enregistrement\n                     */\n                    $scope.goRegister = function () {\n                        $scope.register = true;\n                    };\n\n                    /**\n                     * Retourne à l'écran d'accueil depuis le formulaire d'enregistrement\n                     */\n                    $scope.backToLogin = function () {\n                        $scope.register = false;\n                        $scope.reset();\n                        window.scrollTo(0, 0);\n                        !$scope.isBrowser ? $rootScope.scan() : 0;\n                    };\n\n                    $scope.login = function () {\n                        checkBarcode($scope.form.barcode);\n                        if (navigator.notification) {\n                            $scope.barcodeValid ? displayData() : navigator.notification.alert(\"Ce n° de carte n'est pas valide !\", null, document.title, \"OK\");\n                        } else {\n                            $scope.barcodeValid ? displayData() : $window.alert(\"Ce n° de carte n'est pas valide !\");\n                        }\n                    };\n\n                    $scope.autoLogin = function () {\n                        if ($scope.auto) {\n                            checkBarcode($scope.form.barcode);\n                            if (navigator.notification) {\n                                $scope.barcodeValid ? displayData() : navigator.notification.alert(\"Ce n° de carte n'est pas valide !\", null, document.title, \"OK\");\n                            } else {\n                                $scope.barcodeValid ? displayData() : $window.alert(\"Ce n° de carte n'est pas valide !\");\n                            }\n                        }\n                    };\n\n                    $scope.hideDialog = function () {\n                        $mdDialog.hide();\n                        $('md-backdrop, .md-dialog-container').remove(); //jshint ignore:line\n                    };\n\n                    /**\n                     * @function $scope.reset\n                     * réinitialise l'appli en supprimant les variables de $scope créées jusque là, utilisé pour la déconnexion client\n                     */\n                    $scope.reset = function () {\n                        $scope.client = {barcode: $scope.form.barcode};\n                        $scope.showVoucherView = false;\n                        delete $scope.barcode;\n                        delete $scope.voucher;\n                        delete $rootScope.cardNum;\n                        delete $scope.form.barcode;\n                        delete $scope.form.password;\n                    };\n\n                    $scope.addPassage = function () {\n                        var passageObj = APIService.get.emptyPassageObj();\n                        APIService.actions.addPassage(passageObj).success(function () {\n                            $scope.hideDialog();\n                            $scope.toast(\"Un passage a bien été ajouté à cette carte\");\n                            $scope.reset();\n                            $timeout(function () {\n                                !$scope.isBrowser ? $rootScope.scan() : 0;\n                            }, 1600);\n                            return true;\n                        });\n                    };\n\n                    /**\n                     * @function $scope.useBalanceToPay\n                     * @param {number} val The amount of the balance to use for payment\n                     * @param {object} balance The balance object to use */\n                    $scope.useBalanceToPay = function (val, balance) {\n                        var passageObj = APIService.get.emptyPassageObj();\n\n                        if (~~balance.Value < ~~val) {\n                            if (navigator.notification) {\n                                navigator.notification.alert('Ce montant est supérieur au total de la cagnotte', null, document.title, \"OK\");\n                            } else {\n                                $window.alert('Ce montant est supérieur au total de la cagnotte');\n                            }\n                            return false;\n                        } else {\n                            $scope.hasUsedBalance = true;\n                            passageObj.BalanceUpdate = {\n                                \"Id\": balance.Id,\n                                \"UpdateValue\": -parseFloat(val)\n                            };\n\n                            $log.info('adding Passage...', JSON.stringify(passageObj));\n                            APIService.actions.addPassage(passageObj).success(function () {\n                                $mdDialog.hide();\n                                $scope.hideDialog();\n                                $scope.toast(\"Le paiement en avoir a bien été effectué\");\n                                $scope.reset();\n                                $timeout(function () {\n                                    $scope.hasUsedBalance = false;\n                                    !$scope.isBrowser ? $rootScope.scan() : 0;\n                                }, 1600);\n                                return true;\n                            });\n                        }\n                    };\n\n                    $scope.useOffer = function (offer) {\n                        var passageObj = APIService.get.emptyPassageObj();\n\n                        passageObj.Offer = {\n                            \"OfferObjectId\": offer.OfferObjectId,\n                            \"Barcode\": offer.Barcode,\n                            \"Date\": new Date() + \"\"\n                        };\n\n                        APIService.actions.addPassage(passageObj).success(function () {\n                            $mdDialog.hide();\n                            $scope.hideDialog();\n                            $scope.toast(\"L'offre a bien été utilisée\");\n                            $scope.reset();\n                            $timeout(function () {\n                                !$scope.isBrowser ? $rootScope.scan() : 0;\n                            }, 1600);\n                            return true;\n                        });\n                    };\n\n                    $scope.useVoucherOffer = function (offer) {\n                        APIService.actions.useVoucherOffer(offer.OfferClassId).then(function (data) {\n                            if (data) {\n                                $scope.toast(\"L'offre a bien été utilisée\");\n                                $scope.reset();\n                                $timeout(function () {\n                                    !$scope.isBrowser ? $rootScope.scan() : 0;\n                                }, 1600);\n                                return true;\n                            } else {\n                                $window.alert('Une erreur est survenue, l\\'offre n\\'a pas été utilisée !');\n                            }\n                        }).catch(function (error) {\n                            $log.error(error);\n                            $window.alert('Une erreur ' + error.status + ' est survenue !');\n                        });\n                    };\n\n                    $scope.orderAmount = function (amount) {\n                        if (amount) {\n                            var passageObj = APIService.get.emptyPassageObj();\n                            passageObj.OrderTotalIncludeTaxes = amount;\n                            passageObj.OrderTotalExcludeTaxes = amount;\n                            if ($scope.data.CustomActions) {\n                                passageObj.CustomAction = {\n                                    \"CustomActionId\": $('#actionSelect').val()\n                                }\n                            }\n                            APIService.actions.addPassage(passageObj).success(function () {\n                                $scope.hideDialog();\n                                $scope.toast(\"Un passage a bien été ajouté à cette carte\");\n                                $scope.reset();\n                                $timeout(function () {\n                                    $rootScope.scan();\n                                }, 1600);\n                                return true;\n                            });\n                        }\n                    };\n\n                    $scope.submitRegister = function () {\n                        var obj = {\n                            Barcode: $scope.client.barcode,\n                            FirstName: $scope.client.firstname,\n                            LastName: $scope.client.lastname,\n                            Gender: $scope.client.gender,\n                            DateOfBirthMonth: $scope.client.birthdate ? $scope.client.birthdate.getMonth() + 1 : \"\",\n                            DateOfBirthDay: $scope.client.birthdate ? $scope.client.birthdate.getDay() : \"\",\n                            DateOfBirthYear: $scope.client.birthdate ? $scope.client.birthdate.getFullYear() : \"\",\n                            Email: $scope.client.email,\n                            Phone: $scope.client.tel,\n                            StreetAddress: $scope.client.address,\n                            ZipPostalCode: $scope.client.zipcode,\n                            City: $scope.client.city,\n                            Password: $scope.client.password,\n                            ConfirmPassword: $scope.client.passwordConfirm\n                        };\n\n                        APIService.actions.register(obj).then(function () {\n                            $scope.barcode = $scope.client.barcode;\n                            $scope.form.password = $scope.client.password;\n                            $scope.register = false;\n                            displayData();\n                        }).catch(function (error) {\n                            if (error.status === 500)\n                                $window.alert('Cette carte est déjà enregistrée !');\n                            else $window.alert('Une erreur ' + error.status + ' est survenue !');\n                        });\n                    };\n\n                    $scope.useAction = function () {\n                        if (navigator.notification) {\n                            navigator.notification.alert(\"L'action a bien été effectuée\", function () {\n                                var passageObj = APIService.get.emptyPassageObj();\n                                var amount = $('#orderAmountInput').val();\n                                passageObj.OrderTotalIncludeTaxes = amount;\n                                passageObj.OrderTotalExcludeTaxes = amount;\n                                passageObj.CustomAction = {\n                                    \"CustomActionId\": $('#actionSelect').val()\n                                };\n                                $log.info(passageObj);\n\n                                APIService.actions.addPassage(passageObj).success(function () {\n                                    $scope.hideDialog();\n                                    $scope.toast(\"Un passage a bien été ajouté à cette carte\");\n                                    $scope.reset();\n                                    $timeout(function () {\n                                        !$scope.isBrowser ? $rootScope.scan() : 0;\n                                    }, 1000);\n                                    return true;\n                                });\n                                $scope.backToLogin();\n                            });\n                        } else {\n                            alert(\"L'action a bien été effectuée :\\n\");\n                            var passageObj = APIService.get.emptyPassageObj();\n                            var amount = $('#orderAmountInput').val();\n                            passageObj.OrderTotalIncludeTaxes = amount;\n                            passageObj.OrderTotalExcludeTaxes = amount;\n                            passageObj.CustomAction = {\n                                \"CustomActionId\": $('#actionSelect').val()\n                            };\n                            $log.info(passageObj);\n\n                            APIService.actions.addPassage(passageObj).success(function () {\n                                $scope.hideDialog();\n                                $scope.toast(\"Un passage a bien été ajouté à cette carte\");\n                                $scope.reset();\n                                $timeout(function () {\n                                    !$scope.isBrowser ? $rootScope.scan() : 0;\n                                }, 1600);\n                                return true;\n                            });\n                            $scope.backToLogin();\n                        }\n                    };\n\n                    $scope.showConfirm = function (ev, offer) {\n                        if (navigator.notification) {\n                            navigator.notification.confirm('Voulez-vous utiliser cette offre ?', function () {\n                                $scope.useOffer(offer);\n                            }, document.title);\n                        } else {\n                            var doUse = $window.confirm(\"Voulez-vous utiliser cette offre ?\");\n                            if (doUse) $scope.useOffer(offer);\n                        }\n                    };\n\n                    $scope.showAddPassageConfirm = function (ev) {\n                        if (navigator.notification) {\n                            navigator.notification.confirm(\"Confirmez-vous que ce client est passé en caisse sans utiliser d'offre et/ou d'avoir fidélité ?\", function () {\n                                $scope.addPassage();\n                            }, document.title);\n                        } else {\n                            var doUse = $window.confirm(\"Confirmez-vous que ce client est passé en caisse sans utiliser d'offre et/ou d'avoir fidélité ?\");\n                            if (doUse) $scope.addPassage();\n                        }\n                    };\n\n                    $scope.showAdvanced = function (ev, balance) {\n                        if (balance.UseToPay === true) {\n                            balanceInUse = balance;\n\n                            $mdDialog.show({\n                                clickOutsideToClose: true,\n                                targetEvent: ev,\n                                controller: 'DialogCtrl',\n                                template: '<md-dialog aria-label=\"Paiement En Avoir\"> \\\n                                <md-dialog-content class=\"sticky-container clearfix\"> \\\n                                    <md-subheader class=\"md-sticky-no-effect\">PAIEMENT EN AVOIR</md-subheader> \\\n                                    <div> \\\n                                        <form action=\"\" name=\"balancePaymentForm\" novalidate>\\\n                                            <md-input-container> \\\n                                                <label>Montant</label> \\\n                                                <input id=\"balancePaymentInput\" ng-minlength=\"1\" ng-pattern=\"/^[0-9.,]+$/\" type=\"tel\" ng-model=\"balancePayment.value\" required> \\\n                                            </md-input-container> \\\n                                        </form> \\\n                                    </div> \\\n                                    </md-dialog-content> \\\n                                    <div class=\"md-actions\" layout=\"row\"> \\\n                                     <div class=\"clearfix\"> \\\n                                        <md-button class=\"md-accent md-hue-3\" ng-disabled=\"balancePaymentForm.$invalid || balancePaymentForm.$pristine\" ng-click=\"useBalanceToPay(balancePayment.value)\"> \\\n                                        VALIDER \\\n                                        </md-button> \\\n                                        <md-button class=\"md-warn\" ng-click=\"cancel()\"> \\\n                                        ANNULER \\\n                                        </md-button> \\\n                                     </div> \\\n                                    </div> \\\n                                </md-dialog>'\n                            }).then(function () {\n\n                            }, function () {\n\n                            });\n\n                            $timeout(function () {\n                                $('#balancePaymentInput').focus(); //jshint ignore:line\n                            }, 500);\n                        } else {\n                            return false;\n                        }\n                    };\n\n                    /** Check barcode */\n                    checkBarcode($scope.barcode);\n\n                    /** If the barcode defined in the parameters is valid,*/\n                    $scope.barcodeValid ? displayData() : $scope.hideData = true;\n                }\n            ]\n        };\n    })\n\n/** ngEnter directive for handling enter keypress on inputs (from: http://eric.sau.pe/angularjs-detect-enter-key-ngenter/) */\n    .directive('ngEnter', function () {\n        return function (scope, element, attrs) {\n            element.bind(\"keydown keypress\", function (event) {\n                if (event.which === 13) {\n                    scope.$apply(function () {\n                        scope.$eval(attrs.ngEnter);\n                    });\n                    event.preventDefault();\n                }\n            });\n        };\n    })\n\n    .controller('DialogCtrl', ['$scope', '$rootScope', '$mdDialog', function ($scope, $rootScope, $mdDialog) {\n        $scope.hide = function () {\n            $mdDialog.hide();\n            $('md-backdrop, .md-dialog-container').remove(); //jshint ignore:line\n        };\n\n        $scope.cancel = function () {\n            $mdDialog.cancel();\n            $('md-backdrop, .md-dialog-container').remove(); //jshint ignore:line\n        };\n\n        $scope.useBalanceToPay = function (val) {\n            $rootScope.useBalanceToPay(val);\n            $scope.hide();\n        };\n    }])\n\n/** compareTo directive for validating that an input value is equal to another **/\n    .directive('compareTo', function () {\n        return {\n            require: \"ngModel\",\n            scope: {\n                otherModelValue: \"=compareTo\"\n            },\n            link: function (scope, element, attributes, ngModel) {\n\n                ngModel.$validators.compareTo = function (modelValue) {\n                    return modelValue === scope.otherModelValue;\n                };\n\n                scope.$watch(\"otherModelValue\", function () {\n                    ngModel.$validate();\n                });\n            }\n        };\n    }\n);"]}