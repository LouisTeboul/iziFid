{"version":3,"sources":["controllers.js"],"names":[],"mappings":";;AAAA,OAAO,CAAC,MAAM,CAAC,qBAAqB,EAAE,EAAE,CAAC,CACpC,UAAU,CAAC,YAAY,EAAE,CAAC,QAAQ,EAAE,YAAY,EAAE,MAAM,EAAE,UAAU,EAAE,WAAW,EAAE,aAAa,EAAE,UAAU,MAAM,EAAE,UAAU,EAAE,IAAI,EAAE,QAAQ,EAAE,SAAS,EAAE,WAAW,EAAE;AACrK,QAAI,WAAW,GAAG,CAAC;QACf,YAAY,GAAG,YAAY,CAAC,OAAO,CAAC,cAAc,CAAC,CAAC;AACxD,gBAAY,GAAG,IAAI,CAAC,KAAK,CAAC,YAAY,CAAC,CAAC;;AAExC,cAAU,CAAC,OAAO,GAAG,EAAE,CAAC;;AAExB,UAAM,CAAC,IAAI,GAAG,YAAY;AACtB,YAAI,WAAW,KAAK,CAAC,EAAE;AACnB,gBAAI,OAAO,GAAG,WAAW,CAAC,WAAW,EAAE,CAAC;AACxC,mBAAO,CAAC,IAAI,CACR,UAAU,MAAM,EAAE;AACd,oBAAI,MAAM,CAAC,KAAK,IAAI,KAAK,EAAE;AACvB,wBAAI,MAAM,CAAC,MAAM,CAAC,IAAI,EAAE;AACpB,kCAAU,CAAC,OAAO,GAAG,MAAM,CAAC,MAAM,CAAC,IAAI,CAAC,OAAO,CAAC,MAAM,EAAE,EAAE,CAAC,CAAC;AAC5D,oCAAY,CAAC,IAAI,CAAC,EAAC,IAAI,EAAE,UAAU,CAAC,OAAO,EAAE,IAAI,EAAE,IAAI,IAAI,EAAE,EAAC,CAAC,CAAC;AAChE,oCAAY,CAAC,OAAO,CAAC,cAAc,EAAE,IAAI,CAAC,SAAS,CAAC,YAAY,CAAC,CAAC,CAAC;AACnE,8BAAM,CAAC,MAAM,CAAC,YAAW;AACrB,6BAAC,CAAC,uBAAuB,CAAC,CAAC,GAAG,CAAC,EAAE,CAAC,CAAC;AACnC,6BAAC,CAAC,uBAAuB,CAAC,CAAC,GAAG,CAAC,UAAU,CAAC,OAAO,CAAC,CAAC;yBACtD,CAAC,CAAC;qBACN;iBACJ,MACI;AACD,wBAAI,CAAC,IAAI,CAAC,UAAU,GAAG,MAAM,CAAC,CAAC;iBAClC;aACJ,CACJ,CAAC;;AAEF,oBAAQ,CAAC,YAAY;AACjB,2BAAW,GAAG,CAAC,CAAC;aACnB,EAAE,IAAI,CAAC,CAAA;SACX;AACD,mBAAW,EAAE,CAAC;KACjB,CAAC;;AAEF,cAAU,CAAC,IAAI,GAAG,MAAM,CAAC,IAAI,CAAC;;AAE9B,UAAM,CAAC,IAAI,EAAE,CAAC;CACjB,CAAC,CACL,CAAC","file":"controllers-compiled.js","sourcesContent":["angular.module('starter.controllers', [])\n    .controller('HeaderCtrl', ['$scope', '$rootScope', '$log', '$timeout', '$location', 'appServices', function ($scope, $rootScope, $log, $timeout, $location, appServices) {\n        var scanCounter = 0,\n            prevPassages = localStorage.getItem('prevPassages');\n        prevPassages = JSON.parse(prevPassages);\n\n        $rootScope.cardNum = \"\";\n\n        $scope.scan = function () {\n            if (scanCounter === 0) {\n                var promise = appServices.scanBarcode();\n                promise.then(\n                    function (result) {\n                        if (result.error == false) {\n                            if (result.result.text) {\n                                $rootScope.cardNum = result.result.text.replace(/.+\\//, '');\n                                prevPassages.push({card: $rootScope.cardNum, date: new Date()});\n                                localStorage.setItem('prevPassages', JSON.stringify(prevPassages));\n                                $scope.$apply(function() {\n                                    $('input[name=barcodeId]').val(\"\");\n                                    $('input[name=barcodeId]').val($rootScope.cardNum);\n                                });\n                            }\n                        }\n                        else {\n                            $log.warn('Erreur: ' + result);\n                        }\n                    }\n                );\n\n                $timeout(function () {\n                    scanCounter = 0;\n                }, 2000)\n            }\n            scanCounter++;\n        };\n\n        $rootScope.scan = $scope.scan;\n\n        $scope.scan();\n    }]\n);"]}